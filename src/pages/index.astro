---
import Base from "../layouts/Base.astro";
import { site } from "../data/site";
import { services } from "../data/services";
import { testimonials } from "../data/testimonials";
import { blogPosts } from "../data/blog";
import { compareIsoDateDesc, formatLongDate } from "../lib/dates";

const latestPosts = [...blogPosts].sort((a, b) => compareIsoDateDesc(a.date, b.date)).slice(0, 3);
---
<Base>
  <section class="relative overflow-hidden pt-6 pb-12">
    <div class="absolute inset-0">
      <div class="h-full w-full bg-[radial-gradient(circle_at_top,_rgba(96,200,215,0.35),_transparent_55%)]"></div>
    </div>
    <div class="container relative">
      <div class="mx-auto max-w-4xl space-y-4 text-center">
        <p class="text-sm font-medium uppercase tracking-[0.3em] text-ink/60 sm:text-lg">Pool Cleaning + Repair</p>
        <h1 class="mx-auto max-w-4xl font-display text-2xl sm:text-3xl">
          Friendly, professional pool and spa services for the Greater New England Seacost. We see what big
          companies miss and always go the extra mile.
        </h1>
        {false && <p class="text-lg text-ink/70">
          We keep pools clear, safe, and ready for every weekend. From weekly service to urgent repairs,
          Cusoon Pools delivers precise chemistry, spotless surfaces, and reliable equipment.
        </p>}
        <div class="grid gap-4 pt-4 sm:grid-cols-3">
          <div class="rounded-2xl border border-sand bg-white/80 p-4 shadow-lift">
            <p class="text-xs uppercase tracking-[0.2em] text-ink/60">Response</p>
            <p class="mt-2 font-semibold">Same-week bookings</p>
          </div>
          <div class="rounded-2xl border border-sand bg-white/80 p-4 shadow-lift">
            <p class="text-xs uppercase tracking-[0.2em] text-ink/60">Chemistry</p>
            <p class="mt-2 font-semibold">Balanced every visit</p>
          </div>
          <div class="rounded-2xl border border-sand bg-white/80 p-4 shadow-lift">
            <p class="text-xs uppercase tracking-[0.2em] text-ink/60">Trusted</p>
            <p class="mt-2 font-semibold">Local Seacoast team</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="services" class="pt-6 pb-12">
    <div class="container">
      <div class="mx-auto max-w-4xl text-center">
          <p class="text-sm font-medium uppercase tracking-[0.3em] text-ink/60 sm:text-lg">Services</p>
          {false && <h2 class="mt-6 font-display text-2xl sm:text-3xl">We offer a full range of pool services, equipment repairs, and anything else your pool and deck require. Let us know what you need and we'll help. No big company sales pitches.</h2>}
          {false && <p class="mt-4 text-lg text-ink/70">
            Weekly cleanings, repairs, openings, closings, and emergency attention delivered by our team of friendly experts.
            We'll work with you to customize a plan for your needs.
          </p>}
      </div>
      <div class="mt-8 grid gap-6 lg:grid-cols-3">
        {services.map((service) => (
          <article class="rounded-3xl border border-sand bg-white p-6 shadow-lift">
            <h3 class="font-display text-2xl">{service.title}</h3>
            <p class="mt-3 text-ink/70">{service.description}</p>
            <ul class="mt-5 space-y-2 text-sm text-ink/70">
              {service.highlights.map((highlight) => (
                <li>&bull; {highlight}</li>
              ))}
            </ul>
          </article>
        ))}
      </div>
    </div>
  </section>

  <section class="py-16 bg-white">
    <div class="container grid gap-10 lg:grid-cols-[0.9fr_1.1fr] lg:items-center">
      <div class="rounded-[32px] border border-sand bg-sand/60 p-8">
        <p class="text-xs uppercase tracking-[0.4em] text-sea">Why Cusoon</p>
        <h2 class="mt-4 font-display text-3xl">Precision chemistry. Pro-level repairs. Zero guesswork.</h2>
        <p class="mt-4 text-ink/70">
          We track every pool visit, log readings, and tailor treatments to New England weather.
          You get consistent water clarity and equipment that lasts longer.
        </p>
        <div class="mt-6 space-y-4 text-sm text-ink/70">
          <p>&bull; Detailed service reports after each visit.</p>
          <p>&bull; Transparent pricing before any repair work.</p>
          <p>&bull; Locally focused on Exeter and the Seacoast.</p>
        </div>
      </div>
      <div class="grid gap-6">
        <div class="rounded-3xl border border-sand bg-white p-6 shadow-lift">
          <p class="text-xs uppercase tracking-[0.2em] text-ink/60">Full Service</p>
          <p class="mt-3 text-lg font-semibold">Weekly cleaning, chemical balance, and equipment monitoring.</p>
        </div>
        <div class="rounded-3xl border border-sand bg-white p-6 shadow-lift">
          <p class="text-xs uppercase tracking-[0.2em] text-ink/60">Repair Ready</p>
          <p class="mt-3 text-lg font-semibold">Same-week diagnostics for heaters, pumps, filters, and leaks.</p>
        </div>
        <div class="rounded-3xl border border-sand bg-white p-6 shadow-lift">
          <p class="text-xs uppercase tracking-[0.2em] text-ink/60">Seasonal Care</p>
          <p class="mt-3 text-lg font-semibold">Openings, closings, and winterization handled by pros.</p>
        </div>
      </div>
    </div>
  </section>

  <section
    id="testimonials"
    class="pt-6 pb-10 bg-[linear-gradient(180deg,rgba(96,200,215,0.18)_0%,rgba(255,255,255,1)_58%)]"
  >
    <div class="container">
      <div class="mx-auto max-w-4xl text-center">
        <p class="text-sm font-medium uppercase tracking-[0.3em] text-ink/60 sm:text-lg">Testimonials</p>
        <h2 class="mt-0.5 text-sm text-ink/70">Great Service + Low Prices = Happy Owners!</h2>
      </div>
      <div class="mt-8 grid gap-6 sm:grid-cols-2">
        {testimonials.map((testimonial, index) => (
          <article
            class={`rounded-3xl border p-6 shadow-lift ${
              index % 2 === 0
                ? "border-aqua/50 bg-[linear-gradient(160deg,rgba(96,200,215,0.2),rgba(255,255,255,0.96))]"
                : "border-sun/50 bg-[linear-gradient(160deg,rgba(255,186,73,0.2),rgba(255,255,255,0.96))]"
            }`}
          >
            <p class="text-base leading-relaxed text-ink">"{testimonial.quote}"</p>
            <p class="mt-4 text-sm font-semibold">{testimonial.name}</p>
            <p class="text-xs uppercase tracking-[0.2em] text-sea/80">{testimonial.location}</p>
          </article>
        ))}
      </div>
    </div>
  </section>
  <section id="gallery" class="pt-6 pb-12 bg-white">
    <div class="container">
      <div class="mx-auto max-w-4xl text-center">
          <p class="text-sm font-medium uppercase tracking-[0.3em] text-ink/60 sm:text-lg">Gallery</p>
          {false && <h2 class="mt-6 font-display text-2xl sm:text-3xl">These are a few of our favorite pools:</h2>}
      </div>
      <div class="mt-8 grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
        {site.galleryImages.map((imageUrl, index) => (
          <div class="group relative overflow-hidden rounded-3xl border border-sand shadow-lift">
            <img
              src={imageUrl}
              alt="Pool service project"
              class="h-72 w-full object-cover transition duration-500 group-hover:scale-105"
            />
          </div>
        ))}
      </div>
    </div>
  </section>

  <section class="pt-6 pb-12">
    <div class="container">
      <div class="mx-auto max-w-4xl text-center">
        <p class="text-sm font-medium uppercase tracking-[0.3em] text-ink/60 sm:text-lg">CUSOON BLOG</p>
        {false && <h2 class="mx-auto mt-6 max-w-4xl font-display text-2xl sm:text-3xl">
          Useful tips and topics from the CUSOON team on weekly (and emergency!) cleaning, equipment maintenance, pool area safety, chemistry 101/201/301, all-weather best practices, and other topics.
        </h2>}
      </div>
      <div class="mt-8 grid gap-5">
        {latestPosts.map((post) => (
          <article class="rounded-3xl border border-sand bg-white p-6 shadow-lift">
            <p class="text-xs uppercase tracking-[0.2em] text-ink/50">{formatLongDate(post.date)}</p>
            <h3 class="mt-2 font-display text-2xl">
              <a href={`/blog/${post.slug}`} class="hover:text-sea transition">
                {post.title}
              </a>
            </h3>
            <p class="mt-3 text-ink/70">{post.excerpt}</p>
          </article>
        ))}
      </div>      
    </div>
  </section>

  <section id="contact" class="pt-6 pb-12">
    <div class="container grid gap-10 lg:grid-cols-[0.95fr_1.05fr] lg:items-center">
      <div class="text-center">
        <p class="text-sm font-medium uppercase tracking-[0.3em] text-ink/60 sm:text-lg">Get a Quote</p>
        <p class="mt-0.5 text-sm text-ink/70">(no pressure!)</p>
        {false && <h2 class="mt-6 font-display text-2xl sm:text-3xl">Tell us about your pool.</h2>}
        {false && <p class="mt-4 text-ink/70">
          customer service is our number one priority. We fill follow up with you shortly thereafter, you can also
          just email for general questions about taking care of your own pool. We love talking to people!
        </p>}
      </div>
      <form class="rounded-3xl border border-sand bg-white p-6 shadow-lift">
        <div class="grid gap-4 sm:grid-cols-2">
          <label class="text-sm">
            Full Name
            <input
              type="text"
              name="name"
              placeholder="Your name"
              class="mt-2 w-full rounded-xl border border-ink/20 bg-white px-4 py-3 text-ink placeholder:text-ink/50"
            />
          </label>
          <label class="text-sm">
            Phone
            <input
              type="tel"
              name="phone"
              placeholder="(603) 555-0000"
              class="mt-2 w-full rounded-xl border border-ink/20 bg-white px-4 py-3 text-ink placeholder:text-ink/50"
            />
          </label>
        </div>
        <label class="mt-4 block text-sm">
          Email
          <input
            type="email"
            name="email"
            placeholder="you@email.com"
            class="mt-2 w-full rounded-xl border border-ink/20 bg-white px-4 py-3 text-ink placeholder:text-ink/50"
          />
        </label>
        <label class="mt-4 block text-sm">
          How can we help?
          <textarea
            name="message"
            rows={4}
            placeholder="Weekly cleaning, repair, opening, or other details."
            class="mt-2 w-full rounded-xl border border-ink/20 bg-white px-4 py-3 text-ink placeholder:text-ink/50"
          ></textarea>
        </label>
        <button
          type="submit"
          class="mt-6 w-full rounded-full bg-sun px-6 py-3 text-sm font-semibold uppercase tracking-[0.2em] text-ink transition hover:bg-aqua"
        >
          Request a Quote
        </button>
        <p class="mt-3 text-xs text-ink/60">
          This form is a placeholder. Connect it to Formspree, Web3Forms, or your CRM.
        </p>
      </form>
    </div>
  </section>
</Base>
