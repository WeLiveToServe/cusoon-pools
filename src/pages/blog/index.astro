---
import Base from "../../layouts/Base.astro";
import { blogPosts } from "../../data/blog";
import { compareIsoDateDesc, formatLongDate } from "../../lib/dates";

const sortedPosts = [...blogPosts].sort((a, b) => compareIsoDateDesc(a.date, b.date));
---
<Base
  title="Pool Care Blog | Cusoon Pools"
  description="Pool care tips, maintenance checklists, and repair insights for Exeter, NH pool owners."
  canonical="https://cusoon-pools.com/blog/"
>
  <section class="pt-10 pb-16">
    <div class="container">
      <div class="space-y-4 text-center">
        <p class="text-base uppercase tracking-[0.4em] text-sea/80 sm:text-xl">CUSOON BLOG</p>
        <h1 class="mx-auto mt-6 max-w-4xl font-display text-2xl sm:text-3xl">
          Useful tips and topics from the CUSOON team on weekly (and emergency!) cleaning, equipment maintenance, pool area safety, chemistry 101/201/301, all-weather best practices, and other topics.
        </h1>
      </div>
      <div class="mt-10 space-y-6">
        {sortedPosts.map((post, index) => (
          <>
            <article class="rounded-3xl border border-sand bg-white/80 p-6 shadow-sm">
              <a href={`/blog/${post.slug}`} class="block">
                <h2 class="text-xl font-semibold text-ink">{post.title}</h2>
                <p class="mt-3 text-sm text-ink/70">
                  {formatLongDate(post.date)} Â· {post.excerpt}
                </p>
                {post.sections[0]?.title ? (
                  <p class="mt-2 text-sm text-ink/60">{post.sections[0].title}</p>
                ) : null}
              </a>
            </article>
            {index < sortedPosts.length - 1 && <div class="border-t border-dashed border-ink/20"></div>}
          </>
        ))}
      </div>
    </div>
  </section>
</Base>
